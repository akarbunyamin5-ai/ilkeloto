<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>İLKEL OTO Admin</title>

<style>
body{font-family:Arial;background:#f2f2f2;padding:20px}
.box{background:#fff;padding:20px;border-radius:8px;max-width:450px;margin:auto}
select,input,button{width:100%;padding:10px;margin-bottom:10px}
button{background:#ffde00;border:none;font-weight:bold;cursor:pointer}
</style>
</head>

<body>

<div class="box">

<h3>İlan Ekle</h3>

<select id="brand"></select>
<select id="model"></select>

<input id="year" placeholder="Yıl">
<input id="km" placeholder="KM">
<input id="price" placeholder="Fiyat">

<input id="phone" placeholder="Telefon">
<input id="whatsapp" placeholder="WhatsApp (905xxxxxxxxx)">

<input type="file" id="photos" multiple>

<button onclick="save()">Kaydet</button>

<p id="msg"></p>

</div>

<script>

const brandData = {
Fiat:["Egea","Linea","Doblo"],
Renault:["Clio","Megane","Symbol"],
Volkswagen:["Golf","Passat","Polo"],
Toyota:["Corolla","Yaris"],
Ford:["Focus","Courier"],
Hyundai:["i20","Tucson"],
BMW:["320i","520i"],
Mercedes:["C180","E200"],
Tesla:["Model 3","Model Y"],
TOGG:["T10X"]
};

const brandSel=document.getElementById("brand");
const modelSel=document.getElementById("model");

brandSel.innerHTML="<option>Marka Seç</option>";
for(let b in brandData){
brandSel.innerHTML+=`<option>${b}</option>`;
}

brandSel.onchange=()=>{
modelSel.innerHTML="<option>Model Seç</option>";
brandData[brandSel.value].forEach(m=>{
modelSel.innerHTML+=`<option>${m}</option>`;
});
};

function save(){

let cars = JSON.parse(localStorage.getItem("cars")) || [];

let files = photos.files;
if(files.length==0){
alert("Foto seç");
return;
}

let images=[];
let loaded=0;

for(let i=0;i<files.length;i++){

let reader=new FileReader();

reader.onload=function(){
images.push(reader.result);
loaded++;

if(loaded==files.length){

let car={
id:Date.now(),
brand:brandSel.value,
model:modelSel.value,
year:year.value,
km:km.value,
price:price.value,
phone:phone.value,
whatsapp:whatsapp.value,
images:images
};

cars.push(car);
localStorage.setItem("cars",JSON.stringify(cars));

msg.innerHTML="✅ İlan Kaydedildi";

year.value="";
km.value="";
price.value="";
phone.value="";
whatsapp.value="";
photos.value="";
}

};

reader.readAsDataURL(files[i]);
}

}

</script>

</body>
</html>
