<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<script>
if(localStorage.getItem("admin")!=="1"){
  location.href="admin-login.html";
}
</script>

<div class="container">
<h2>Admin Panel</h2>

<button class="btn-danger" onclick="hepsiniSil()">ðŸ—‘ TÃ¼mÃ¼nÃ¼ Sil</button>
<button class="btn" onclick="cikis()">Ã‡Ä±kÄ±ÅŸ</button>

<hr>
<div id="liste"></div>
</div>

<script>
let ilanlar=JSON.parse(localStorage.getItem("ilanlar")||"[]");
const alan=document.getElementById("liste");

function ciz(){
  alan.innerHTML="";
  ilanlar.forEach((i,index)=>{
    alan.innerHTML+=`
    <div class="card">
      <b>${i.marka} ${i.model}</b><br>
      YÄ±l:${i.yil} KM:${i.km}<br>
      Fiyat:${i.fiyat} â‚º<br>
      Tel:${i.tel}<br>
      Durum:${i.durum}<br><br>
      <button class="btn-success" onclick="onayla(${index})">Onayla</button>
      <button class="btn-danger" onclick="sil(${index})">Sil</button>
    </div>`;
  });
}

function onayla(i){ ilanlar[i].durum="onayli"; kaydet(); }
function sil(i){ ilanlar.splice(i,1); kaydet(); }
function hepsiniSil(){
  if(confirm("Hepsi silinsin mi?")){
    ilanlar=[];
    localStorage.removeItem("ilanlar");
    ciz();
  }
}
function kaydet(){
  localStorage.setItem("ilanlar",JSON.stringify(ilanlar));
  ciz();
}
function cikis(){
  localStorage.removeItem("admin");
  location.href="admin-login.html";
}

ciz();
</script>

</body>
</html>
