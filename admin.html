<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ƒ∞LKEL OTO Admin Panel</title>

<style>

body{
font-family:Arial;
background:#f2f2f2;
padding:20px
}

.box{
background:#fff;
padding:20px;
border-radius:8px;
max-width:500px;
margin:auto
}

input,select,button{
width:100%;
padding:10px;
margin-bottom:10px
}

button{
background:#ffde00;
border:none;
font-weight:bold;
cursor:pointer
}

.list{
margin-top:30px
}

.item{
background:#fff;
padding:10px;
border-radius:6px;
margin-bottom:10px;
border:1px solid #ddd
}

.actions button{
width:48%;
margin-top:5px
}

.del{
background:#f44336;
color:white
}

.edit{
background:#2196f3;
color:white
}

</style>
</head>

<body>

<div class="box">

<h2>ƒ∞LAN EKLE</h2>

<select id="brand"></select>
<select id="model"></select>

<input id="year" placeholder="Yƒ±l">
<input id="km" placeholder="KM">
<input id="price" placeholder="Fiyat">

<select id="city">
<option>ƒ∞l Se√ß</option>
<option>ƒ∞stanbul</option>
<option>Ankara</option>
<option>ƒ∞zmir</option>
<option>Bursa</option>
<option>Antalya</option>
<option>Adana</option>
<option>Konya</option>
<option>Gaziantep</option>
<option>Kocaeli</option>
<option>Mersin</option>
</select>

<input id="phone" placeholder="Telefon">
<input id="whatsapp" placeholder="WhatsApp">

<input type="file" id="photos" multiple>

<button onclick="save()">‚ûï ƒ∞lan Ekle</button>

<p id="msg"></p>

</div>

<div class="list" id="list"></div>

<script>

// MARKA MODEL
const brandData={
Fiat:["Egea","Linea","Doblo"],
Renault:["Clio","Megane","Symbol"],
Volkswagen:["Golf","Passat","Polo"],
Toyota:["Corolla","Yaris"],
Ford:["Focus","Courier"],
Hyundai:["i20","Tucson"],
BMW:["320i","520i"],
Mercedes:["C180","E200"],
Tesla:["Model 3","Model Y"],
TOGG:["T10X"]
};

const brandSel=document.getElementById("brand");
const modelSel=document.getElementById("model");

brandSel.innerHTML="<option>Marka Se√ß</option>";

for(let b in brandData){
brandSel.innerHTML+=`<option>${b}</option>`;
}

brandSel.onchange=()=>{
modelSel.innerHTML="<option>Model Se√ß</option>";
brandData[brandSel.value].forEach(m=>{
modelSel.innerHTML+=`<option>${m}</option>`;
});
};

// VERƒ∞
let cars=JSON.parse(localStorage.getItem("cars"))||[];
const list=document.getElementById("list");

// EKLE
function save(){

let files=photos.files;
if(files.length==0){alert("Foto se√ß");return;}

let images=[];
let loaded=0;

for(let i=0;i<files.length;i++){

let reader=new FileReader();

reader.onload=function(){

images.push(reader.result);
loaded++;

if(loaded==files.length){

let car={
id:Date.now(),
brand:brandSel.value,
model:modelSel.value,
year:year.value,
km:km.value,
price:price.value,
city:city.value,
phone:phone.value,
whatsapp:whatsapp.value,
images:images
};

cars.push(car);
localStorage.setItem("cars",JSON.stringify(cars));

msg.innerHTML="‚úÖ ƒ∞lan Eklendi";

year.value="";
km.value="";
price.value="";
phone.value="";
whatsapp.value="";
photos.value="";

render();

}

};

reader.readAsDataURL(files[i]);
}

}

// Lƒ∞STELE
function render(){

list.innerHTML="<h2>ƒ∞LANLAR</h2>";

cars.forEach(c=>{

list.innerHTML+=`

<div class="item">

<b>${c.brand} ${c.model}</b><br>
${c.city} | ${c.year} | ${c.km} KM<br>
<b>${c.price} ‚Ç∫</b>

<div class="actions">
<button class="edit" onclick="edit(${c.id})">‚úèÔ∏è D√ºzenle</button>
<button class="del" onclick="remove(${c.id})">üóë Sil</button>
</div>

</div>

`;

});

}

// Sƒ∞L
function remove(id){

if(!confirm("ƒ∞lan silinsin mi?")) return;

cars=cars.filter(x=>x.id!=id);
localStorage.setItem("cars",JSON.stringify(cars));

render();
}

// D√úZENLE
function edit(id){

let car=cars.find(x=>x.id==id);

let newPrice=prompt("Yeni fiyat",car.price);
let newKm=prompt("Yeni KM",car.km);
let newYear=prompt("Yeni yƒ±l",car.year);
let newCity=prompt("Yeni ≈üehir",car.city);
let newPhone=prompt("Yeni telefon",car.phone);

car.price=newPrice;
car.km=newKm;
car.year=newYear;
car.city=newCity;
car.phone=newPhone;

localStorage.setItem("cars",JSON.stringify(cars));

render();
}

render();

</script>

</body>
</html>
