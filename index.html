<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Ä°lkel Oto</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f5f5f5;
}
header{
  background:#000;
  color:#fff;
  padding:25px;
  text-align:center;
}
#ilanlar{
  max-width:900px;
  margin:20px auto;
  padding:10px;
}
.ilan{
  background:#fff;
  padding:15px;
  margin-bottom:15px;
  border-radius:6px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.ilan h3{
  margin:0 0 10px 0;
}
.bos{
  text-align:center;
  color:#777;
  padding:40px;
}
</style>
</head>
<body>

<header>
  <h1>Ä°LKEL OTO</h1>
  <p>OnaylÄ± Sahibinden Ä°lanlar</p>
</header>

<div id="ilanlar">
  <div class="bos">YÃ¼kleniyor...</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  query,
  where
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ðŸ”¥ Firebase ayarlarÄ± */
const firebaseConfig = {
  apiKey: "AIzaSyDp3wjVF9w3MTFt0B1o4Jcdc_H9nvlqSY8",
  authDomain: "ilkeloto.firebaseapp.com",
  projectId: "ilkeloto"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const alan = document.getElementById("ilanlar");

/* ðŸ”´ SAYFA Ã‡Ä°ZÄ°LSÄ°N DÄ°YE GECÄ°KTÄ°R */
setTimeout(async () => {
  alan.innerHTML = "";

  const q = query(
    collection(db,"ilanlar"),
    where("durum","==","onayli")
  );

  const snap = await getDocs(q);

  if(snap.empty){
    alan.innerHTML = `<div class="bos">HenÃ¼z onaylÄ± ilan yok</div>`;
    return;
  }

  snap.forEach(docSnap=>{
    const d = docSnap.data();

    alan.innerHTML += `
      <div class="ilan">
        <h3>${d.marka} ${d.model}</h3>
        <p><b>YÄ±l:</b> ${d.yil}</p>
        <p><b>Kilometre:</b> ${d.km ?? "-"}</p>
        <p><b>Fiyat:</b> ${d.fiyat} â‚º</p>
        <p><b>Ekspertiz:</b> ${d.ekspertiz}</p>
        <p>${d.aciklama}</p>
      </div>
    `;
  });
}, 0);
</script>

</body>
</html>
