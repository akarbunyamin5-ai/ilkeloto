<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>İLKEL OTO | Araç İlan Platformu</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f2f2}

/* HEADER */
header{background:#ffde00;padding:12px}
header h2{margin:0}

/* SEARCH BAR */
.top-search{padding:10px;background:#fff}
.top-search input{width:100%;padding:10px}

/* LAYOUT */
.container{display:flex;padding:10px}

/* FILTER */
.filter{
width:260px;
background:#fff;
padding:10px;
border-radius:6px
}
.filter select,.filter input{
width:100%;
padding:8px;
margin-bottom:8px
}

/* LIST */
.content{flex:1;margin-left:10px}
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
gap:10px
}

/* CARD */
.card{
background:#fff;
padding:10px;
border-radius:6px;
border:1px solid #ddd
}
.price{
color:#2e7d32;
font-weight:bold;
font-size:18px
}
</style>
</head>

<body>

<header>
<h2>İLKEL OTO</h2>
</header>

<div class="top-search">
<input id="keyword" placeholder="Kelime ile ara (marka, model...)">
</div>

<div class="container">

<!-- SOL FİLTRE -->
<div class="filter">

<select id="brand">
<option value="">Marka</option>
</select>

<select id="model">
<option value="">Model</option>
</select>

<input id="minPrice" placeholder="Min Fiyat">
<input id="maxPrice" placeholder="Max Fiyat">

<button onclick="filter()">Ara</button>

</div>

<!-- SAĞ LİSTE -->
<div class="content">
<div id="list" class="grid"></div>
</div>

</div>

<script>

// VERİYİ ADMİNDEN OKU
let data = JSON.parse(localStorage.getItem("cars")) || [];

// MARKA DOLDUR
const brandSel=document.getElementById("brand");
const modelSel=document.getElementById("model");
const list=document.getElementById("list");

function loadBrands(){
let brands=[...new Set(data.map(i=>i.brand))];
brands.forEach(b=>{
let o=document.createElement("option");
o.value=b;
o.text=b;
brandSel.add(o);
});
}

// MODEL DOLDUR
brandSel.onchange=()=>{
modelSel.innerHTML="<option value=''>Model</option>";
let models=data.filter(i=>i.brand==brandSel.value)
.map(i=>i.model);
[...new Set(models)].forEach(m=>{
let o=document.createElement("option");
o.value=m;
o.text=m;
modelSel.add(o);
});
};

// LİSTELE
function show(arr){
list.innerHTML="";
arr.forEach(i=>{
list.innerHTML+=`
<div class="card">
<b>${i.brand} ${i.model}</b><br>
${i.year} | ${i.km} KM<br>
<div class="price">${i.price} ₺</div>
</div>
`;
});
}

// FİLTRE
function filter(){

let key=keyword.value.toLowerCase();
let min=+minPrice.value||0;
let max=+maxPrice.value||999999999;

let result=data.filter(i=>
(!brand.value||i.brand==brand.value)&&
(!model.value||i.model==model.value)&&
(i.price>=min&&i.price<=max)&&
(i.brand.toLowerCase().includes(key)||
 i.model.toLowerCase().includes(key))
);

show(result);
}

// BAŞLANGIÇ
loadBrands();
show(data);

</script>

</body>
</html>
