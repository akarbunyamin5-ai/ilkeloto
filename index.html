<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>İlkel Oto</title>
  <style>
    body { font-family: Arial; margin: 0; background:#f5f5f5; }
    header, footer { background:#000; color:#fff; text-align:center; padding:20px; }
    .container { padding:20px; }
    .ilan { background:#fff; padding:15px; margin-bottom:15px; border-radius:6px; }
  </style>
</head>
<body>

<header>
  <h1>İLKEL OTO</h1>
  <p>Onaylı Sahibinden İlanlar</p>
</header>

<div class="container" id="ilanlar">
  Yükleniyor...
</div>

<footer>
  © 2026 İlkel Oto
</footer>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import {
    getFirestore,
    collection,
    query,
    where,
    getDocs
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDp3wJVF9w3MTfOB1o4Jcdc_H9nvLqSY8",
    authDomain: "ilkeloto.firebaseapp.com",
    projectId: "ilkeloto",
    storageBucket: "ilkeloto.appspot.com",
    messagingSenderId: "503658235063",
    appId: "1:503658235063:web:e271d2bc989be290b97932"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function ilanlariGetir() {
    const alan = document.getElementById("ilanlar");
    alan.innerHTML = "";

    const q = query(
      collection(db, "ilanlar"),
      where("Durum", "==", "onayli")
    );

    const snapshot = await getDocs(q);

    if (snapshot.empty) {
      alan.innerHTML = "Henüz ilan yok.";
      return;
    }

    snapshot.forEach(doc => {
      const d = doc.data();
      alan.innerHTML += `
        <div class="ilan">
          <h3>${d.Marka} ${d.Model}</h3>
          <p>Yıl: ${d.Yil}</p>
          <p>KM: ${d.Km}</p>
          <p>Fiyat: ${d.Fiyat} ₺</p>
          <p>Telefon: ${d.Gsm}</p>
        </div>
      `;
    });
  }

  ilanlariGetir();
</script>

</body>
</html>
