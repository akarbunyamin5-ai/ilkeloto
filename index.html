<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>İlkel Oto | Onaylı İlanlar</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f4f4f4;
  color:#222;
}

/* HEADER */
header{
  background:#111;
  color:#fff;
  padding:20px;
}
header h1{
  margin:0;
  font-size:26px;
}
header p{
  margin:5px 0 0;
  font-size:14px;
  color:#ccc;
}

/* LAYOUT */
.main{
  max-width:1300px;
  margin:20px auto;
  display:flex;
  gap:20px;
  padding:0 15px;
}

/* SOL FİLTRE */
aside{
  width:240px;
  background:#fff;
  border-radius:6px;
  padding:15px;
  height:fit-content;
}
aside h3{
  margin:0 0 10px;
  font-size:16px;
  border-bottom:1px solid #eee;
  padding-bottom:8px;
}
aside ul{
  list-style:none;
  padding:0;
  margin:0;
}
aside li{
  padding:8px 10px;
  cursor:pointer;
  border-radius:4px;
  font-size:14px;
}
aside li:hover{
  background:#f0f0f0;
}
aside li.active{
  background:#111;
  color:#fff;
}

/* İLAN ALANI */
.content{
  flex:1;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:20px;
}

/* KART */
.card{
  background:#fff;
  border-radius:6px;
  padding:15px;
  box-shadow:0 2px 6px rgba(0,0,0,.12);
  cursor:pointer;
  transition:.2s;
}
.card:hover{
  transform:translateY(-3px);
  box-shadow:0 6px 12px rgba(0,0,0,.15);
}
.card h3{
  margin:0 0 8px;
  font-size:16px;
}
.card p{
  margin:4px 0;
  font-size:14px;
}
.price{
  margin-top:8px;
  font-size:18px;
  font-weight:bold;
  color:#1a7f37;
}

/* FOOTER */
footer{
  background:#111;
  color:#ccc;
  text-align:center;
  padding:15px;
  margin-top:40px;
  font-size:13px;
}
</style>
</head>

<body>

<header>
  <h1>İLKEL OTO</h1>
  <p>Sadece ilk sahibinden onaylı ilanlar</p>
</header>

<div class="main">

  <!-- SOL MARKALAR -->
  <aside>
    <h3>Markalar</h3>
    <ul id="markalar">
      <li class="active" data-marka="">Tümü</li>
    </ul>
  </aside>

  <!-- İLANLAR -->
  <div class="content">
    <div id="ilanlar" class="grid">Yükleniyor...</div>
  </div>

</div>

<footer>
  © 2026 İlkel Oto
</footer>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "API_KEYİN",
  authDomain: "ilkeloto.firebaseapp.com",
  projectId: "ilkeloto"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ilanAlan = document.getElementById("ilanlar");
const markaAlan = document.getElementById("markalar");

let tumIlanlar = [];

async function yukle(){
  const q = query(collection(db,"ilanlar"), where("durum","==","onayli"));
  const snap = await getDocs(q);

  tumIlanlar = [];
  const markalar = new Set();

  snap.forEach(d=>{
    const data = d.data();
    tumIlanlar.push({ id:d.id, ...data });
    markalar.add(data.marka);
  });

  markalar.forEach(m=>{
    const li=document.createElement("li");
    li.textContent=m;
    li.dataset.marka=m;
    markaAlan.appendChild(li);
  });

  filtre("");
}

function filtre(marka){
  document.querySelectorAll("aside li").forEach(li=>li.classList.remove("active"));
  document.querySelector(`aside li[data-marka="${marka}"]`)?.classList.add("active");

  if(!marka){
    goster(tumIlanlar);
  }else{
    goster(tumIlanlar.filter(i=>i.marka===marka));
  }
}

function goster(liste){
  ilanAlan.innerHTML="";
  if(liste.length===0){
    ilanAlan.innerHTML="İlan bulunamadı";
    return;
  }

  liste.forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    c.onclick=()=>location.href="ilan-detay.html?id="+i.id;
    c.innerHTML=`
      <h3>${i.marka} ${i.model}</h3>
      <p>Yıl: ${i.yil}</p>
      <p>KM: ${i.km}</p>
      <div class="price">${i.fiyat} ₺</div>
      <p><b>Tel:</b> ${i.telefon}</p>
    `;
    ilanAlan.appendChild(c);
  });
}

markaAlan.onclick=e=>{
  if(e.target.tagName==="LI"){
    filtre(e.target.dataset.marka);
  }
};

yukle();
</script>

</body>
</html>
