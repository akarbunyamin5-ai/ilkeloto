<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>İlkel Oto</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#111;color:#fff;padding:25px;text-align:center}
main{display:flex;max-width:1300px;margin:20px auto}
aside{width:230px;background:#fff;padding:15px;border-radius:6px;margin-right:20px;height:fit-content}
aside h3{margin-top:0}
aside ul{list-style:none;padding:0}
aside li{padding:8px;cursor:pointer;border-radius:4px}
aside li:hover, aside .active{background:#111;color:#fff}

.content{flex:1}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px}
.card{background:#fff;border-radius:6px;padding:15px;box-shadow:0 2px 6px rgba(0,0,0,.15)}
.price{color:green;font-weight:bold;font-size:18px}

footer{background:#111;color:#fff;text-align:center;padding:15px;margin-top:40px}
</style>
</head>

<body>

<header>
  <h1>İLKEL OTO</h1>
  <p>Onaylı Sahibinden İlanlar</p>
</header>

<main>

<aside>
  <h3>Markalar</h3>
  <ul id="markalar">
    <li class="active" onclick="filtrele('')">Tümü</li>
  </ul>
</aside>

<div class="content">
  <div id="ilanlar" class="grid">Yükleniyor...</div>
</div>

</main>

<footer>© 2026 İlkel Oto</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "API_KEYİN",
  authDomain: "ilkeloto.firebaseapp.com",
  projectId: "ilkeloto",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ilanAlan = document.getElementById("ilanlar");
const markaAlan = document.getElementById("markalar");

let tumIlanlar = [];

async function yukle() {
  const q = query(collection(db,"ilanlar"), where("durum","==","onayli"));
  const snap = await getDocs(q);

  tumIlanlar = [];
  const markalar = new Set();

  snap.forEach(d => {
    const i = d.data();
    tumIlanlar.push(i);
    markalar.add(i.marka);
  });

  // MARKALARI SOLA YAZ
  markalar.forEach(m => {
    const li = document.createElement("li");
    li.textContent = m;
    li.onclick = () => filtrele(m);
    markaAlan.appendChild(li);
  });

  goster(tumIlanlar);
}

window.filtrele = function(marka){
  document.querySelectorAll("aside li").forEach(li=>li.classList.remove("active"));
  event.target.classList.add("active");

  if(!marka){
    goster(tumIlanlar);
  } else {
    goster(tumIlanlar.filter(i => i.marka === marka));
  }
}

function goster(liste){
  ilanAlan.innerHTML = "";
  if(liste.length === 0){
    ilanAlan.innerHTML = "İlan bulunamadı";
    return;
  }

  liste.forEach(i=>{
    ilanAlan.innerHTML += `
      <div class="card">
        <h3>${i.marka} ${i.model}</h3>
        <p>Yıl: ${i.yil}</p>
        <p>KM: ${i.km}</p>
        <p class="price">${i.fiyat} ₺</p>
        <p><b>Tel:</b> ${i.telefon}</p>
      </div>
    `;
  });
}

yukle();
</script>

</body>
</html>
