<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore,
  collection,
  query,
  where,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

console.log("ðŸ”¥ Firebase script Ã§alÄ±ÅŸtÄ±");

const firebaseConfig = {
  apiKey: "AIzaSyDp3wJVF9w3MTFt0B1o4Jcdc_H9nvlqSY8",
  authDomain: "ilkeloto.firebaseapp.com",
  projectId: "ilkeloto",
  storageBucket: "ilkeloto.appspot.com",
  messagingSenderId: "503658235063",
  appId: "1:503658235063:web:e271d2bc989be290b97932"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

console.log("ðŸ“¡ Firestore baÄŸlandÄ±");

const ilanlarDiv = document.getElementById("ilanlar");

async function ilanlariGetir() {
  const q = query(
    collection(db, "ilanlar"),
    where("Durum", "==", "onayli")
  );

  const snapshot = await getDocs(q);

  console.log("ðŸ“¦ Gelen ilan sayÄ±sÄ±:", snapshot.size);

  if (snapshot.empty) {
    ilanlarDiv.innerHTML = "HenÃ¼z onaylÄ± ilan yok.";
    return;
  }

  ilanlarDiv.innerHTML = "";

  snapshot.forEach(doc => {
    const d = doc.data();
    ilanlarDiv.innerHTML += `
      <div style="border:1px solid #ccc; padding:10px; margin:10px">
        <b>${d.Marka} ${d.Model}</b><br>
        YÄ±l: ${d.Yil} | Km: ${d.Km}<br>
        Fiyat: ${d.Fiyat} TL<br>
        Tel: ${d.Gsm}
      </div>
    `;
  });
}

ilanlariGetir();

</script>
