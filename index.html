<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>İLKEL OTO - Onaylı Sahibinden İlanlar</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

body{
margin:0;
font-family:Arial;
background:#f2f2f2;
}

header{
background:#000;
color:white;
padding:15px;
font-size:22px;
font-weight:bold;
}

.container{
display:flex;
padding:15px;
gap:15px;
}

/* SOL FİLTRE */

.sidebar{
width:220px;
background:white;
padding:15px;
border-radius:8px;
height:fit-content;
}

.sidebar h3{
margin-top:0;
}

.sidebar select,
.sidebar input{
width:100%;
padding:8px;
margin-bottom:10px;
}

/* İLAN ALANI */

.content{
flex:1;
}

.searchbox{
width:100%;
padding:12px;
font-size:16px;
margin-bottom:15px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
gap:15px;
}

.card{
background:white;
padding:12px;
border-radius:8px;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

.card h3{
margin:0 0 5px 0;
}

.price{
color:green;
font-weight:bold;
font-size:18px;
margin-top:5px;
}

footer{
background:black;
color:white;
text-align:center;
padding:12px;
margin-top:20px;
}

</style>
</head>

<body>

<header>
İLKEL OTO — Onaylı Sahibinden İlanlar
</header>

<div class="container">

<div class="sidebar">
<h3>Filtre</h3>

<select id="brandFilter">
<option value="">Tüm Markalar</option>
</select>

<input type="number" id="minPrice" placeholder="Min Fiyat">
<input type="number" id="maxPrice" placeholder="Max Fiyat">

<button onclick="applyFilter()">Filtrele</button>
</div>

<div class="content">

<input class="searchbox" id="search" placeholder="Ara: marka, model, yıl, fiyat">

<div class="grid" id="listings"></div>

</div>

</div>

<footer>
© 2026 ilkeloto.com.tr
</footer>

<!-- FIREBASE BAĞLANTI -->

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyDp3wjVf9w3MTFt0B1o4Jcdc_H9nvlqSY8",
authDomain: "ilkeloto.firebaseapp.com",
projectId: "ilkeloto",
storageBucket: "ilkeloto.appspot.com",
messagingSenderId: "503658235063",
appId: "1:503658235063:web:e271d2bc989be290b97932"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let allCars = [];

async function loadCars(){

const querySnapshot = await getDocs(collection(db,"cars"));

querySnapshot.forEach(doc=>{
allCars.push(doc.data());
});

renderCars(allCars);
loadBrands();

}

function renderCars(data){

const box = document.getElementById("listings");
box.innerHTML = "";

data.forEach(car=>{

box.innerHTML += `
<div class="card">
<h3>${car.brand} ${car.model}</h3>
<p>Yıl: ${car.year}</p>
<p>KM: ${car.km}</p>
<div class="price">${car.price} ₺</div>
</div>
`;

});

}

function loadBrands(){

const brands = [...new Set(allCars.map(c=>c.brand))];

const select = document.getElementById("brandFilter");

brands.forEach(b=>{
select.innerHTML += `<option value="${b}">${b}</option>`;
});

}

window.applyFilter = function(){

let brand = document.getElementById("brandFilter").value;
let min = document.getElementById("minPrice").value;
let max = document.getElementById("maxPrice").value;
let text = document.getElementById("search").value.toLowerCase();

let filtered = allCars.filter(c=>{

let ok = true;

if(brand && c.brand != brand) ok=false;
if(min && c.price < min) ok=false;
if(max && c.price > max) ok=false;

let searchText = (c.brand+c.model+c.year).toLowerCase();
if(text && !searchText.includes(text)) ok=false;

return ok;

});

renderCars(filtered);

}

document.getElementById("search").addEventListener("input",applyFilter);

loadCars();

</script>

</body>
</html>
