<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Ä°lan Ver | Ä°lkel Oto</title>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f5f5f5;
  margin:0;
}
.container{
  max-width:1000px;
  margin:30px auto;
  background:#fff;
  padding:25px;
  border-radius:8px;
}
h1,h3{margin-top:0}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:15px;
}

.card{
  border:1px solid #ddd;
  border-radius:8px;
  padding:10px;
  text-align:center;
  cursor:pointer;
}
.card.active{border:2px solid #000;background:#f0f0f0}
.card img{width:60px;height:60px;object-fit:contain}

select,input,textarea{
  width:100%;
  padding:10px;
  margin-top:10px;
  box-sizing:border-box;
}

textarea{min-height:120px}

button{
  margin-top:15px;
  padding:12px;
  width:100%;
  background:#000;
  color:#fff;
  border:none;
  font-size:16px;
  cursor:pointer;
}

.hidden{display:none}

#msg{
  margin-top:15px;
  font-weight:bold;
}
</style>
</head>
<body>

<div class="container">
  <h1>Ä°lan Ver</h1>

  <!-- MARKA -->
  <h3>1ï¸âƒ£ Marka SeÃ§</h3>
  <div class="grid" id="brandGrid"></div>

  <!-- MODEL -->
  <div id="modelArea" class="hidden">
    <h3>2ï¸âƒ£ Model SeÃ§</h3>
    <select id="modelSelect"></select>
  </div>

  <!-- FORM -->
  <div id="formArea" class="hidden">
    <h3>3ï¸âƒ£ Ä°lan DetaylarÄ±</h3>

    <input id="yil" type="number" placeholder="YÄ±l">
    <input id="km" type="number" placeholder="Kilometre">

    <select id="yakit">
      <option value="">YakÄ±t TÃ¼rÃ¼</option>
      <option>Benzin</option>
      <option>Dizel</option>
      <option>LPG</option>
      <option>Hibrit</option>
      <option>Elektrik</option>
    </select>

    <select id="vites">
      <option value="">Vites</option>
      <option>Manuel</option>
      <option>Otomatik</option>
      <option>YarÄ± Otomatik</option>
    </select>

    <input id="fiyat" type="number" placeholder="Fiyat (â‚º)">

    <select id="ekspertiz">
      <option value="">Ekspertiz</option>
      <option>Yok</option>
      <option>Var - Temiz</option>
      <option>Var - BoyalÄ±</option>
      <option>Var - DeÄŸiÅŸen</option>
    </select>

    <textarea id="aciklama" placeholder="AÃ§Ä±klama"></textarea>

    <button onclick="kaydet()">Ä°lanÄ± GÃ¶nder</button>
    <div id="msg"></div>
  </div>
</div>

<script>
/* MARKA + MODEL */
const DATA = {
  Fiat:{ models:["Egea","Linea","Doblo","Punto","Brava"] },
  Renault:{ models:["Clio","Megane","Symbol","Taliant"] },
  Ford:{ models:["Focus","Fiesta","Courier","Mondeo"] },
  Toyota:{ models:["Corolla","Yaris","Auris"] },
  Volkswagen:{ models:["Golf","Passat","Polo","Jetta"] }
};

let seciliMarka="";
let seciliModel="";

const brandGrid=document.getElementById("brandGrid");
const modelArea=document.getElementById("modelArea");
const modelSelect=document.getElementById("modelSelect");
const formArea=document.getElementById("formArea");
const msg=document.getElementById("msg");

/* MARKALARI BAS */
for(const marka in DATA){
  const div=document.createElement("div");
  div.className="card";
  div.innerText=marka;

  div.onclick=()=>{
    document.querySelectorAll(".card").forEach(x=>x.classList.remove("active"));
    div.classList.add("active");

    seciliMarka=marka;
    modelSelect.innerHTML="";
    DATA[marka].models.forEach(m=>{
      const o=document.createElement("option");
      o.value=m; o.textContent=m;
      modelSelect.appendChild(o);
    });

    modelArea.classList.remove("hidden");
    formArea.classList.add("hidden");
  };

  brandGrid.appendChild(div);
}

/* MODEL SEÃ‡ */
modelSelect.onchange=()=>{
  seciliModel=modelSelect.value;
  formArea.classList.remove("hidden");
};
</script>

<!-- ğŸ”¥ FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, addDoc, collection, serverTimestamp } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ğŸ”´ KENDÄ° FIREBASE BÄ°LGÄ°LERÄ°N */
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  projectId: "PROJECT_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* KAYDET */
window.kaydet = async () => {
  if(!seciliMarka || !seciliModel || !yil.value || !km.value || !yakit.value ||
     !vites.value || !fiyat.value || !ekspertiz.value || !aciklama.value){
    msg.style.color="red";
    msg.innerText="TÃ¼m alanlarÄ± doldur";
    return;
  }

  await addDoc(collection(db,"ilanlar"),{
    marka: seciliMarka,
    model: seciliModel,
    yil: Number(yil.value),
    km: Number(km.value),
    yakit: yakit.value,
    vites: vites.value,
    fiyat: Number(fiyat.value),
    ekspertiz: ekspertiz.value,
    aciklama: aciklama.value,
    durum: "beklemede",
    tarih: serverTimestamp()
  });

  msg.style.color="green";
  msg.innerText="Ä°lan gÃ¶nderildi (admin onayÄ± bekleniyor)";
};
</script>

</body>
</html>
