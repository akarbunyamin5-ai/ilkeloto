<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>İlan Ver</title>
<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
.container{max-width:900px;margin:30px auto;background:#fff;padding:20px;border-radius:8px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
.box{border:1px solid #ddd;padding:10px;text-align:center;cursor:pointer;border-radius:6px}
.box.active{border:2px solid #000}
input,select,textarea,button{width:100%;padding:10px;margin-top:10px}
textarea{min-height:100px}
button{background:#000;color:#fff;border:none}
.hidden{display:none}
</style>
</head>
<body>

<div class="container">
<h2>İlan Ver</h2>

<h3>Marka</h3>
<div class="grid" id="markalar"></div>

<div id="modelAlan" class="hidden">
<h3>Model</h3>
<select id="model"></select>
</div>

<div id="formAlan" class="hidden">
<input id="yil" placeholder="Yıl">
<input id="km" placeholder="KM">
<input id="fiyat" placeholder="Fiyat">
<select id="yakit">
<option>Benzin</option><option>Dizel</option><option>LPG</option><option>Elektrik</option>
</select>
<select id="vites">
<option>Manuel</option><option>Otomatik</option>
</select>
<textarea id="aciklama" placeholder="Açıklama"></textarea>
<button onclick="kaydet()">İlanı Gönder</button>
<div id="msg"></div>
</div>
</div>

<script>
const DATA={
Fiat:["Egea","Linea","Doblo","Brava","Palio","Albea"],
Renault:["Clio","Megane","Symbol","Fluence","Taliant"],
Ford:["Focus","Fiesta","Courier","Transit"],
Volkswagen:["Golf","Passat","Polo","Caddy"],
Toyota:["Corolla","Yaris","C-HR"],
BMW:["3 Serisi","5 Serisi","X3","X5"],
Mercedes:["C Serisi","E Serisi","CLA"],
Hyundai:["i20","i30","Elantra"],
Honda:["Civic","City"],
Peugeot:["208","301","3008"],
Opel:["Corsa","Astra"],
Skoda:["Octavia","Superb"],
Tesla:["Model 3","Model Y"],
TOGG:["T10X"]
};

let seciliMarka="";
const markaDiv=document.getElementById("markalar");
const modelAlan=document.getElementById("modelAlan");
const modelSelect=document.getElementById("model");
const formAlan=document.getElementById("formAlan");

Object.keys(DATA).forEach(m=>{
 const d=document.createElement("div");
 d.className="box";
 d.innerText=m;
 d.onclick=()=>{
  document.querySelectorAll(".box").forEach(x=>x.classList.remove("active"));
  d.classList.add("active");
  seciliMarka=m;
  modelSelect.innerHTML="";
  DATA[m].forEach(md=>{
   const o=document.createElement("option");
   o.textContent=md;
   modelSelect.appendChild(o);
  });
  modelAlan.classList.remove("hidden");
 };
 markaDiv.appendChild(d);
});

modelSelect.onchange=()=>formAlan.classList.remove("hidden");
</script>

<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import{getFirestore,addDoc,collection}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app=initializeApp({
 apiKey:"API_KEY",
 authDomain:"PROJECT.firebaseapp.com",
 projectId:"PROJECT"
});
const db=getFirestore(app);

window.kaydet=async()=>{
 await addDoc(collection(db,"ilanlar"),{
  marka:seciliMarka,
  model:model.value,
  yil:yil.value,
  km:km.value,
  fiyat:fiyat.value,
  yakit:yakit.value,
  vites:vites.value,
  aciklama:aciklama.value,
  durum:"beklemede"
 });
 msg.innerText="İlan gönderildi (onay bekliyor)";
};
</script>

</body>
</html>
