<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ƒ∞lan Detay</title>

<style>
body{font-family:Arial;background:#f2f2f2;padding:10px}
.box{background:#fff;padding:15px;border-radius:8px;max-width:800px;margin:auto}

.gallery img{width:100%;max-height:350px;object-fit:cover}
.thumb img{width:70px;height:60px;object-fit:cover;margin:3px;cursor:pointer}

.price{color:green;font-size:22px;font-weight:bold}

.btn{display:block;text-align:center;padding:12px;margin-top:10px;color:#fff;text-decoration:none;border-radius:6px}
.call{background:#2196f3}
.wp{background:#25d366}

.favBtn{
border:1px solid #ccc;
padding:10px;
margin-bottom:10px;
cursor:pointer
}

.activeFav{color:red;border-color:red}
</style>
</head>

<body>

<div class="box">

<button id="favBtn" class="favBtn">‚ù§Ô∏è Favoriye Ekle</button>

<div class="gallery" id="gallery"></div>
<div class="thumb" id="thumbs"></div>

<h2 id="title"></h2>
<div class="price" id="price"></div>
<p id="info"></p>

<a id="callBtn" class="btn call">üìû Ara</a>
<a id="wpBtn" class="btn wp">üí¨ WhatsApp</a>

</div>

<script>

let params=new URLSearchParams(location.search);
let id=params.get("id");

let cars=JSON.parse(localStorage.getItem("cars"))||[];
let favs=JSON.parse(localStorage.getItem("favs"))||[];

let car=cars.find(x=>x.id==id);

title.innerHTML=car.brand+" "+car.model;
price.innerHTML=car.price+" ‚Ç∫";
info.innerHTML="Yƒ±l: "+car.year+" | KM: "+car.km+" | ≈ûehir: "+car.city;

callBtn.href="tel:"+car.phone;
wpBtn.href="https://wa.me/"+car.whatsapp;

gallery.innerHTML=`<img src="${car.images[0]}">`;

car.images.forEach(img=>{
thumbs.innerHTML+=`<img src="${img}" onclick="gallery.innerHTML='<img src=${img}>'">`;
});

const favBtn=document.getElementById("favBtn");

function updateFav(){
if(favs.includes(car.id)){
favBtn.classList.add("activeFav");
favBtn.innerHTML="‚ù§Ô∏è Favoriden √áƒ±kar";
}else{
favBtn.classList.remove("activeFav");
favBtn.innerHTML="‚ù§Ô∏è Favoriye Ekle";
}
}

favBtn.onclick=()=>{
if(favs.includes(car.id)){
favs=favs.filter(x=>x!=car.id);
}else{
favs.push(car.id);
}

localStorage.setItem("favs",JSON.stringify(favs));
updateFav();
};

updateFav();

</script>

</body>
</html>
